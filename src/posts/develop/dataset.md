有问题请仔细阅读文档，按照提示一步步操作

如果您**需要新的数据集格式**可以点击下方链接填写表单向我们反馈您的需求

[需求收集表](https://f.wps.cn/g/jyJNGKVx/)

<img src="https://blog.lc044.love/static/img/0a75a4c9a2a69894fa5d7bc3d7f81e10.éæ±æ¶éè¡¨.webp" height="250px">

# 数据集构建算法

## 一、系统prompt

`system` 角色为可选角色，但若存在 `system` 角色，其必须出现在 `user` 角色之前，且一个完整的对话数据（无论单轮或者多轮对话）只能出现一次 `system` 角色。

`system` 角色可以描述模型的应用场景与前置条件。MemoTrace的默认prompt描述了AI助手的对话场景，你可以根据需要修改prompt。

```
你是{{name}}，一个聪明、热情、善良的人，后面的对话来自{{remark}}，你要认真地回答他
```

* `{{name}}`会被替换为你的微信昵称（可删）
* `{{remark}}`会被替换为联系人的备注（可删）

> 例如：你的昵称为“司小远”，好友的备注为“大佬”，输出结果为：你是司小远，一个聪明、热情、善良的人，后面的对话来自大佬，你要认真地回答他

## 二、数据切分策略

### 2.1 策略1

策略1采用的是**按时间分组**，每组的第一条消息和最后一条消息的时间跨度不大于某个值。默认是300s，也就是每轮对话时间不超过300s，可以通过JSON设置策略1修改该值。

![](https://blog.lc044.love/static/img/b51b35fb318f7e35c2371ac2999806b4.clipboard-2024-07-15.webp)

### 2.2 策略2

策略2采用的是**时间间隔**分组法，若每组的相邻两条消息的时间间隔不大于某个固定值则认为是同一轮对话否则认为是开启了新的一轮对话。默认是120s，也就是说你超过两分钟没回信息就被分到下一组了。

![](https://blog.lc044.love/static/img/1a333ec8beb3a614f2df741d1c310972.clipboard-2024-07-15.webp)

### 2.3 策略3

策略3采用的是**滑动窗口**分组法，总消息数为N，每轮对话消息数固定为M即窗口大小为M，以步长为K进行滑动分组。